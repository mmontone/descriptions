<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting started &mdash; {} descriptions 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="{} descriptions 0.1 documentation" href="index.html" />
    <link rel="next" title="Implementation" href="implementation.html" />
    <link rel="prev" title="Install" href="install.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          {} descriptions</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Getting started</a><ul>
<li><a class="reference internal" href="#attributes-composition">Attributes composition</a></li>
<li><a class="reference internal" href="#descriptions-composition">Descriptions composition</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="install.html" title="Previous Chapter: Install"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Install</span>
    </a>
  </li>
  <li>
    <a href="implementation.html" title="Next Chapter: Implementation"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Implementation &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/getting_started.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p><strong>{} descriptions</strong> is a very dynamic meta-description library. Meta description of the application&#8217;s domain model is done defining descriptions for the different aspects is desired to represent. This helps automate the generation of different views, editors, serialization schemas, validation procedures for the domain model objects and to avoid very repetitive and error-prone work when those objects change its shape.</p>
<p>Domain model meta descriptions consist of the definition of description objects for its different aspects (viewing, editing, validation, persistence, serialization, etc). Description objects are a collections of attributes, can inherit from each other, and are composable.</p>
<p>Let&#8217;s go through an example to see how this works.</p>
<p>Say we have a <em>person</em> model object:</p>
<div class="highlight-common-lisp"><div class="highlight"><pre><span class="p">(</span><span class="nb">defclass</span> <span class="nv">person</span> <span class="p">()</span>
  <span class="p">((</span><span class="nv">id</span> <span class="ss">:accessor</span> <span class="nv">id</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">username</span> <span class="ss">:initarg</span> <span class="ss">:username</span>
             <span class="ss">:accessor</span> <span class="nv">username</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">fullname</span> <span class="ss">:initarg</span> <span class="ss">:fullname</span>
             <span class="ss">:accessor</span> <span class="nv">fullname</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">email</span> <span class="ss">:initarg</span> <span class="ss">:email</span>
          <span class="ss">:accessor</span> <span class="nv">email</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">password</span> <span class="ss">:initarg</span> <span class="ss">:password</span>
             <span class="ss">:accessor</span> <span class="nv">password</span><span class="p">)))</span>
</pre></div>
</div>
<p>We would like to print instances of that model on the screen. So first we define a <em>{person}</em> description that just describes which attributes <em>person</em> model objecs possess and their &#8220;types&#8221;.</p>
<div class="highlight-common-lisp"><div class="highlight"><pre><span class="p">(</span><span class="nv">define-description</span> <span class="nv">{person}</span> <span class="p">()</span>
  <span class="p">((</span><span class="nv">username</span> <span class="nv">=&gt;string</span>
             <span class="ss">:reader</span> <span class="nf">#&#39;</span><span class="nv">username</span>
             <span class="ss">:writer</span> <span class="nf">#&#39;</span><span class="p">(</span><span class="nb">setf</span> <span class="nv">username</span><span class="p">))</span>
   <span class="p">(</span><span class="nv">email</span> <span class="nv">=&gt;email</span>
          <span class="ss">:reader</span> <span class="nf">#&#39;</span><span class="nv">email</span>
          <span class="ss">:writer</span> <span class="nf">#&#39;</span><span class="p">(</span><span class="nb">setf</span> <span class="nv">email</span><span class="p">))</span>
   <span class="p">(</span><span class="nv">fullname</span> <span class="nv">=&gt;string</span>
             <span class="ss">:reader</span> <span class="nf">#&#39;</span><span class="nv">fullname</span>
             <span class="ss">:writer</span> <span class="nf">#&#39;</span><span class="p">(</span><span class="nb">setf</span> <span class="nv">fullname</span><span class="p">))</span>
   <span class="p">(</span><span class="nv">password</span> <span class="nv">=&gt;password</span>
             <span class="ss">:reader</span> <span class="nf">#&#39;</span><span class="nv">password</span>
             <span class="ss">:writer</span> <span class="nf">#&#39;</span><span class="p">(</span><span class="nb">setf</span> <span class="nv">password</span><span class="p">)))</span>
  <span class="ss">:documentation</span> <span class="s">&quot;A person description&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Descriptions names are enclosed between brackets <tt class="docutils literal"><span class="pre">{</span></tt> <tt class="docutils literal"><span class="pre">}</span></tt> as a naming convention. Also, notice that the attribute types (<tt class="docutils literal"><span class="pre">=&gt;string</span></tt>, <tt class="docutils literal"><span class="pre">=&gt;email</span></tt>, <tt class="docutils literal"><span class="pre">=&gt;password</span></tt>), begin with <tt class="docutils literal"><span class="pre">=&gt;</span></tt>. Attributes types begin with <tt class="docutils literal"><span class="pre">=&gt;</span></tt> as a naming convention.</p>
<p>Now we can use the information on the attributes of a person, and its types, to print a description of a person on the screen. To do that we define a new description that indicates which person slots we would like to print, and in which order.</p>
<div class="highlight-common-lisp"><div class="highlight"><pre><span class="p">(</span><span class="nv">define-description</span> <span class="nv">{person-view}</span> <span class="p">(</span><span class="nv">{person}</span><span class="p">)</span>
  <span class="p">((</span><span class="nv">fullname</span> <span class="nv">=&gt;view</span> <span class="ss">:label</span> <span class="s">&quot;Full name&quot;</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">username</span> <span class="nv">=&gt;view</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">email</span> <span class="nv">=&gt;view</span> <span class="ss">:label</span> <span class="s">&quot;E-mail&quot;</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">password</span> <span class="nv">=&gt;view</span> <span class="ss">:view</span> <span class="no">nil</span><span class="p">)))</span>
</pre></div>
</div>
<p>We can see that the password is disabled for viewing, that &#8220;Full name&#8221; and &#8220;E-mail&#8221; are used for labels, and that fullname, username, email and password are to be displayed in that order.</p>
<p>We can see that in action:</p>
<div class="highlight-common-lisp"><div class="highlight"><pre><span class="p">(</span><span class="nv">display-object</span> <span class="p">(</span><span class="nb">make-instance</span> <span class="ss">&#39;person</span> <span class="ss">:username</span> <span class="s">&quot;mmontone&quot;</span>
                               <span class="ss">:email</span> <span class="s">&quot;mariano@copyleft.no&quot;</span>
                               <span class="ss">:password</span> <span class="s">&quot;lalala&quot;</span>
                               <span class="ss">:fullname</span> <span class="s">&quot;Mariano Montone&quot;</span><span class="p">)</span>
                <span class="nv">{person-view}</span><span class="p">)</span>
</pre></div>
</div>
<p>prints:</p>
<div class="highlight-python"><div class="highlight"><pre>Full name: &quot;Mariano Montone&quot;
Username: &quot;mmontone&quot;
E-mail: &quot;mariano@copyleft.no&quot;

### Descriptions composition
</pre></div>
</div>
<p>Descriptions can be composed using inheritance. Multiple inheritance is supported and they are implemented on top of a prototype based object system, so they can be composed in run time on the fly.</p>
<div class="section" id="attributes-composition">
<h2>Attributes composition<a class="headerlink" href="#attributes-composition" title="Permalink to this headline">¶</a></h2>
<p>When inheriting from other descriptions, attributes with the same name are collapsed into one containing all the attribute properties.</p>
<p>For example, consider the basic <em>{person}</em> description we had before. We can ask for an attribute name and type, but asking if that attribute is going to be displayed throws an error, because that attribute property does not belong to the {person} description, but the <em>{person-view}</em> description we saw before.</p>
<div class="highlight-common-lisp-repl"><div class="highlight"><pre>{}&gt; (attribute-name (get-attribute {person} &#39;fullname))
FULLNAME
{}&gt; (attribute-type (get-attribute {person} &#39;fullname))
#&lt;Object =&gt;STRING {1005A0A0A3}&gt;
{}&gt; (attribute-view (get-attribute {person} &#39;fullname))
;; Error
</pre></div>
</div>
<p>But if we ask the same to the <em>{person-view}</em> description, we can access to all the attributes properties.</p>
<div class="highlight-common-lisp-repl"><div class="highlight"><pre>{}&gt; (attribute-name (get-attribute {person-view} &#39;fullname))
FULLNAME
{}&gt; (attribute-type (get-attribute {person-view} &#39;fullname))
#&lt;Object =&gt;STRING {1005A0A0A3}&gt;
{}&gt; (attribute-view (get-attribute {person-view} &#39;fullname))
T
</pre></div>
</div>
<p>This makes the approach layered, with each description describing different aspects of the same model and extending other more basic descriptions.</p>
</div>
<div class="section" id="descriptions-composition">
<h2>Descriptions composition<a class="headerlink" href="#descriptions-composition" title="Permalink to this headline">¶</a></h2>
<p>As we mentioned before, descriptions can be composed on the fly thanks to the prototype object system the library is implemented in.</p>
<p>For example, we can create new descriptions with the <em>make-description</em> function, passing the descriptions we want to compose as parents:</p>
<div class="highlight-common-lisp"><div class="highlight"><pre><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">description</span> <span class="p">(</span><span class="nv">make-description</span> <span class="ss">:parents</span>
                                     <span class="p">(</span><span class="nb">list</span> <span class="nv">{person-validation}</span> <span class="nv">{person-repl-editing}</span><span class="p">))))</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">person</span> <span class="p">(</span><span class="nb">make-instance</span> <span class="ss">&#39;person</span><span class="p">)))</span>
      <span class="p">(</span><span class="nv">edit-object</span> <span class="nv">person</span> <span class="nv">description</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">validate-object</span> <span class="nv">person</span> <span class="nv">description</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">describe</span> <span class="nv">person</span><span class="p">)))</span>
</pre></div>
</div>
<p>A prettier way of doing it is using the description name as a function:</p>
<div class="highlight-common-lisp"><div class="highlight"><pre><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">description</span> <span class="p">(</span><span class="nv">{person-validation}</span> <span class="nv">{person-repl-editing}</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">person</span> <span class="p">(</span><span class="nb">make-instance</span> <span class="ss">&#39;person</span><span class="p">)))</span>
      <span class="p">(</span><span class="nv">edit-object</span> <span class="nv">person</span> <span class="nv">description</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">validate-object</span> <span class="nv">person</span> <span class="nv">description</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">describe</span> <span class="nv">person</span><span class="p">)))</span>
</pre></div>
</div>
<p>We can also choose not to compose descriptions, but work with them separately on the different aspects of the model objects:</p>
<div class="highlight-common-lisp"><div class="highlight"><pre><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">person</span> <span class="p">(</span><span class="nb">make-instance</span> <span class="ss">&#39;person</span><span class="p">)))</span>
  <span class="p">(</span><span class="nv">edit-object</span> <span class="nv">person</span> <span class="nv">{person-repl-editing}</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">validate-object</span> <span class="nv">person</span> <span class="nv">{person-validation}</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">describe</span> <span class="nv">person</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">print</span>
   <span class="p">(</span><span class="nb">with-output-to-string</span> <span class="p">(</span><span class="nv">s</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">serialize-object</span> <span class="nv">person</span> <span class="nv">{person-serialization}</span> <span class="nv">s</span><span class="p">))))</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Mariano Montone.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>